# Архитектурная документация системы оценивания студентов

## 1. Введение

### 1.1 Назначение
Данный документ описывает архитектуру системы автоматизированного оценивания студенческих работ на основе заданных критериев. Система предназначена для стандартизации процесса оценки и уменьшения субъективности при проверке учебных работ.

### 1.2 Цели системы
- Автоматизация процесса создания и проверки заданий
- Стандартизация критериев оценки
- Обеспечение прозрачности процесса оценивания
- Сокращение времени на проверку работ
- Минимизация субъективных факторов при оценивании

## 2. Обзор архитектуры

### 2.1 Архитектурный стиль
Система построена по принципам **событийно-ориентированной архитектуры** с четким разделением ответственности между участниками процесса.

### 2.2 Ключевые компоненты системы

#### 2.2.1 Пользовательские роли
1. **Преподаватель** - создает задания, определяет критерии, проверяет работы
2. **Студент** - получает задания, выполняет и сдает работы

#### 2.2.2 Процессные компоненты
1. Модуль создания заданий
2. Модуль определения критериев
3. Модуль выполнения работ
4. Модуль проверки и оценки
5. Модуль обратной связи

## 3. Детальная архитектура

### 3.1 Бизнес-процессы

#### 3.1.1 Процесс создания задания
```
Преподаватель → Создать задание → Определить критерии оценки
```

**Технические требования:**
- Интерфейс для ввода описания задания
- Инструменты для определения критериев (с весами/приоритетами)
- Система хранения шаблонов заданий

#### 3.1.2 Процесс выполнения работы
```
Студент → Получить задание → Выполнить работу → Сдать работу
```

**Технические требования:**
- Личный кабинет студента
- Система уведомлений о новых заданиях
- Механизм загрузки выполненных работ
- Контроль сроков сдачи

#### 3.1.3 Процесс проверки и оценки
```
Получить работу → Проверка по критериям → Подсчет баллов → Определение оценки
```

**Алгоритм проверки:**
```javascript
function evaluateWork(criteriaList) {
  let completedCriteria = 0;
  
  criteriaList.forEach(criterion => {
    if (checkCriterion(criterion)) {
      completedCriteria++;
      markCriterionAsCompleted(criterion);
    } else {
      markCriterionAsNotCompleted(criterion);
    }
  });
  
  return calculateGrade(completedCriteria, criteriaList.length);
}
```

### 3.2 Логика оценивания

#### 3.2.1 Матрица оценок
На основе диаграммы определены следующие правила:

| Состояние критериев | Качество выполнения | Оценка |
|---------------------|---------------------|--------|
| Все критерии выполнены | Идеально | 5 |
| Все критерии выполнены | Небольшие ошибки | 4 |
| 1-2 критерия не выполнены | Значительные ошибки | 3 |
| Все критерии не выполнены | Ошибки не по теме | 2 |

#### 3.2.2 Процесс принятия решений
```
IF все критерии выполнены:
  IF есть небольшие ошибки → оценка 4
  ELSE → оценка 5
ELSE IF не выполнены 1-2 критерия → оценка 3
ELSE IF не выполнены все критерии → оценка 2
ELSE → вернуть на доработку
```

## 4. Компонентная архитектура

### 4.1 Серверная часть
```
┌─────────────────────────────────────┐
│           API Gateway               │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────┐  ┌─────────┐  ┌─────┐ │
│  │  Auth   │  │ Assignment│ │ Grading│ │
│  │ Service │  │ Service  │ │ Service │ │
│  └─────────┘  └─────────┘  └─────┘ │
│                                     │
│  ┌─────────┐  ┌─────────┐  ┌─────┐ │
│  │  User   │  │ Storage │ │ Notification │
│  │ Service │  │ Service │ │ Service     │
│  └─────────┘  └─────────┘  └─────┘ │
└─────────────────────────────────────┘
```

### 4.2 База данных
**Сущности:**
1. **Users** (id, role, name, email)
2. **Assignments** (id, title, description, teacher_id, created_at, deadline)
3. **Criteria** (id, assignment_id, description, weight, max_score)
4. **Submissions** (id, assignment_id, student_id, file_url, submitted_at)
5. **Evaluations** (id, submission_id, criterion_id, completed, comments, score)
6. **Grades** (id, submission_id, final_grade, feedback, evaluated_at)

### **4.3. Реализация функциональных требований (Маппинг на ТЗ)**

| ID Требования (из ТЗ) | Название требования | Отвечающий компонент (Микросервис) | Пояснение |
| :--- | :--- | :--- | :--- |
| **FR-01** | Управление пользователями | **Auth Service**, **User Service** | Auth Service отвечает за аутентификацию и выдачу токенов. User Service — за CRUD операции с профилями пользователей и управление ролями. |
| **FR-02, FR-03** | Создание заданий, Определение критериев | **Assignment Service** | Содержит всю логику работы с заданиями и их критериями. Хранит метаданные заданий. |
| **FR-04** | Выполнение и сдача работ | **Assignment Service**, **Storage Service** | Assignment Service управляет статусом сдачи и контролирует сроки. Storage Service отвечает за загрузку, хранение и выдачу файлов работ. |
| **FR-05, FR-06** | Критериальное оценивание, Алгоритм оценивания | **Grading Service** | Ядро системы оценивания. Реализует алгоритм проверки по критериям и применение матрицы оценок. Взаимодействует с Assignment Service для получения критериев. |
| **FR-07, FR-10** | Обратная связь, Пересдача работ | **Grading Service**, **Assignment Service** | Grading Service хранит комментарии преподавателя. Assignment Service управляет статусом работы ("На проверке", "На доработке", "Зачтено") и разрешает повторную загрузку. |
| **FR-08** | Уведомления | **Notification Service** | Отвечает за отправку всех типов уведомлений (Email/SMS/Telegram). Подписывается на события от других сервисов (новая работа, оценка, возврат). |
| **FR-09** | Журнал успеваемости | **User Service**, **Grading Service** | User Service предоставляет данные о студентах и группах. Grading Service — агрегирует данные об оценках для формирования журнала. |

## 5. Интерфейсы и интеграции

### 5.1 REST API Endpoints
```
GET    /api/assignments          - список заданий
POST   /api/assignments          - создать задание
GET    /api/assignments/{id}     - получить задание
POST   /api/submissions          - сдать работу
GET    /api/submissions/{id}     - получить оценку
PUT    /api/evaluations/{id}     - оценить работу
```

### 5.2 Внешние интеграции
- Система аутентификации (LDAP/OAuth)
- Файловое хранилище (S3-совместимое)
- Email/SMS уведомления
- Система ведения журнала успеваемости

## 6. Технические требования

### 6.1 Нефункциональные требования
- **Производительность**: обработка проверки работы ≤ 30 секунд
- **Доступность**: 99.5% uptime в учебное время
- **Безопасность**: разделение доступа по ролям, шифрование данных
- **Масштабируемость**: поддержка до 10,000 одновременных пользователей

### 6.2 Технологический стек (рекомендуемый)
- **Бэкенд**: Node.js/Python (Django/FastAPI)
- **Фронтенд**: React/Vue.js
- **База данных**: PostgreSQL + Redis для кэширования
- **Хранилище файлов**: MinIO/AWS S3
- **Контейнеризация**: Docker, Kubernetes
- **Мониторинг**: Prometheus, Grafana

## 7. Развертывание и эксплуатация

### 7.1 Конфигурации окружений
- Development (разработка)
- Staging (тестирование)
- Production (промышленная эксплуатация)

### 7.2 Процедуры
- Миграции базы данных
- Резервное копирование
- Мониторинг производительности
- Обновление системы

## 8. Заключение

Предложенная архитектура обеспечивает:
1. **Гибкость** в определении критериев оценки
2. **Прозрачность** процесса оценивания
3. **Масштабируемость** для разных учебных заведений
4. **Интегрируемость** с существующими системами
